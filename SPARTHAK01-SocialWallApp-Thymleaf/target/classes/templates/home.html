<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Social Wall</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', Arial, sans-serif; background: #f0f2f5; color: #333; }
        h2 { text-align:center; margin: 30px 0; color: #1a1a1a; }

        .container { max-width: 800px; margin:auto; padding:0 15px; }

        .post {
            background: #fff; padding:20px; margin-bottom:20px; border-radius:12px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08); transition: transform 0.2s, box-shadow 0.2s;
        }
        .post:hover { transform: translateY(-3px); box-shadow:0 12px 24px rgba(0,0,0,0.15); }

        .post h3 { color: #0077ff; margin-bottom:10px; }
        .post p { margin-bottom:15px; line-height:1.6; }

        img { max-width:100%; border-radius:8px; margin-bottom:15px; box-shadow:0 4px 12px rgba(0,0,0,0.08); }

        textarea, input[type="text"], input[type="file"] { width:100%; padding:10px; margin-bottom:15px; border-radius:8px; border:1px solid #ccc; font-size:14px; }
        textarea:focus, input:focus { border-color:#0077ff; }

        button { background:#0077ff; color:#fff; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-weight:600; transition:background 0.2s; }
        button:hover { background:#005bbb; }

        .actions { margin-top:10px; display:flex; gap:10px; flex-wrap:wrap; }
        .actions a { color:#0077ff; text-decoration:none; font-weight:600; }
        .actions a:hover { text-decoration:underline; }

        .stats { font-size:14px; color:#555; margin-bottom:10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Social Wall</h2>

    <!-- CREATE POST -->
    <div class="post">
    <form th:action="@{/posts}" method="post" enctype="multipart/form-data">
        <input type="text" name="username" placeholder="Username" required>
        <textarea name="text" placeholder="What's on your mind?" required></textarea>
        <input type="file" name="image">
        <button type="submit">Post</button>
    </form>
</div>

    <!-- POSTS LIST -->
    <div th:each="post : ${posts}" class="post">
        <h3 th:text="${post.username}"></h3>
        <p th:text="${post.text}"></p>

        <img th:if="${post.imageUrl != null}" th:src="@{${post.imageUrl}}" alt="Post Image"/>

        <div class="stats">
            Likes: <span th:text="${post.likes}"></span> | 
            Comments: <span th:text="${post.commentsCount}"></span>
        </div>

        <div class="actions">
            <form th:action="@{/posts/{id}/like(id=${post.id})}" method="post" style="display:inline;">
                <button type="submit">Like</button>
            </form>
            <a th:href="@{/posts/{id}/comments(id=${post.id})}">View Comments</a>
            <a th:href="@{/posts/{id}/edit(id=${post.id})}">Edit</a>
            <form th:action="@{/posts/{id}/delete(id=${post.id})}" method="post" style="display:inline;"
                  onsubmit="return confirm('Are you sure you want to delete this post?');">
                <button type="submit">Delete</button>
            </form>
        </div>
    </div>
</div>

</body>
</html>
